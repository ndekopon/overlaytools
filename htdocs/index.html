<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>ApexLegends LiveAPI ⇔ WebAPI Playground</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            font-family: 'Consolas', 'Meiryo UI', 'メイリオ', monospace;
        }
        html {
            width: 100%;
        }
        body {
            width: 100%;
            display: grid;
            grid-template-columns: 20em auto;
        }

        /* サイドバー関係 */
        #sidebar {
            box-sizing: border-box;
            padding: 1em;
            border-bottom: 1px solid black;
            border-right: 1px solid black;
        }
        #sidebar h3 {
            margin: 0.4em 0;
            padding: 0;
        }
        #sidebar div {
            padding-left: 1em;
        }
        #sidebar dl {
            margin: 0;
            padding-left: 1em;
            font-size: 90%;
        }
        #sidebar dt {
            margin: 0;
            padding: 0;
        }
        #sidebar dd {
            margin: 0;
            padding-left: 1em;
        }
        #sidebar ul {
            margin: 0;
            padding-left: 1em;
        }
        #sidebar li {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .sidebar-selected {
            background-color: #FFCCCC;
        }
        #sidebar button {
            width: 100%;
            margin-left: auto;
            margin-right: auto;
        }
        #sidebar p {
            margin: 0;
            padding: 0;
        }
        
        /* main */
        #main {
            box-sizing: border-box;
            width: 100%;
            padding: 1em;
        }
        #main > div.hide {
            display: none;
        }

        #main h3 {
            margin: 0.5em 0;
        }
        
        #main h4 {
            margin: 0.4em 0;
        }

        #main button {
            line-height: 1.3em;
            padding: 0 2em;
        }

        /* tournament-set */
        #tournament-set input, #tournament-rename input {
            width: 40em;
            line-height: 1.3em;
        }
        #tournament-set table {
            border-collapse: collapse;
        }
        #tournament-set th {
            border: 1px solid black;
            padding: 0.1em 1em;
        }
        #tournament-set td {
            border: 1px solid black;
            padding: 0.1em 1em;
        }
        #tournament-set tr:hover:has(>td) {
            background-color: #FFFFCC;
        }
        #tournament-set tr.tournament-set-selected {
            background-color: #FFCCCC;
        }

        /* observer-set */
        
        #observer-set table {
            border-collapse: collapse;
        }
        #observer-set th {
            border: 1px solid black;
            padding: 0.1em 1em;
        }
        #observer-set td {
            border: 1px solid black;
            padding: 0.1em 1em;
        }
        #observer-set tr:hover:has(>td) {
            background-color: #FFFFCC;
        }
        #observer-set tr.observer-set-selected {
            background-color: #FFCCCC;
        }

        /* player-name */
        #player-name table {
            border-collapse: collapse;
        }
        #player-name th {
            border: 1px solid black;
            padding: 0.1em 1em;
        }
        #player-name td {
            border: 1px solid black;
            padding: 0.1em 1em;
        }
        #player-name input {
            width: 12em;
            line-height: 1.3em;
        }

        /* team-name */
        #team-name #team-name-container {
            display: grid;
            grid-template-columns: 2em 1fr 1fr;
        }
        #team-name #team-name-num {
            text-align: right;
            line-height: 1.2em;
            font-size: 100%;
            background-color: #CCC;
        }
        #team-name textarea {
            font-size: 100%;
            height: 36em;
            line-height: 1.2em;
            overflow: clip;
            padding-left: 0.1em;
        }
        #team-name #team-name-output {
            line-height: 1.2em;
            font-size: 100%;
            background-color: #CCC;
        }

        /* realtime */
        #realtime #realtime-gameinfo {
            position: fixed;
            right: 1em;
            top: 1em;
            font-size: 50%;
            width: 60em;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            box-sizing: border-box;
            border: 1px solid black;

        }
        #realtime #realtime-gameinfo > div {
            margin-right: 1em;
            align-items: baseline;
        }
        #realtime #realtime-teams {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
        }
        #realtime .realtime-team-banner {
            display: grid;
            grid-template-columns: 2em 1fr 2em 2em;
        }
        #realtime-teams > div {
            box-sizing: border-box;
            border: 1px solid black;
            margin: 1px;
        }
        .realtime-team-kills-header, .realtime-team-placement-header {
            font-size: 30%;
            text-align: center;
        }
        .realtime-team-number, .realtime-team-name {
            line-height: 2em;
        }
        .realtime-team-name {
            overflow: clip;
            font-weight: bold;
        }
        .realtime-team-number, .realtime-team-kills-value, .realtime-team-placement-value {
            text-align: center;
        }
        .realtime-team-eliminated {
            opacity: 0.3;
        }
        .realtime-player-base {
            display: grid;
            grid-template-columns: 2fr 1fr;
            box-sizing: border-box;
            border-top: 1px solid black;
            padding: 0 2px;
        }
        .realtime-player-base.realtime-player-state-collected {
            color: rgb(109, 198, 24);
        }
        .realtime-player-base.realtime-player-state-down {
            color: rgb(213, 25, 26);
        }
        .realtime-player-base.realtime-player-state-killed {
            color: #999;
        }
        .realtime-player-name {
            font-size: 90%;
            font-weight: bold;
            overflow: clip;
        }
        .realtime-player-hpshield {
            display: grid;
            grid-template-columns: 20px 1fr;
        }
        .realtime-player-hpbar, .realtime-player-shieldbar {
            margin-top: 3px;
        }
        .realtime-player-right, .realtime-player-character,.realtime-player-hp, .realtime-player-shield {
            font-size: 30%;
            overflow: clip;
        }
        .realtime-player-base.realtime-player-selected {
            background-color: #FFCCCC;
        }
        .realtime-player-state-alive:hover {
            background-color: #FFFFCC;
        }
        .realtime-player-changed-damage-dealt {
            animation: 1s realtime-player-changed-damage-dealt-animation forwards;
        }

        @keyframes realtime-player-changed-damage-dealt-animation {
            from {
                background-color: #db6ec9;
            }
            to {
            }
        }

        /* announce */
        #announce input {
            width: 40em;
            line-height: 1.3em;
        }

        /* result */
        #result-game-info {
            display: flex;
            font-size: 50%;
        }

        .result-game-info-number {
            font-weight: bold;
        }

        #result-game-info > div {
            box-sizing: border-box;
            border: 1px solid black;
            margin: 1px;
            padding: 2px;
        }
        
        #result-game-info > div:hover {
            background-color: #FFFFCC;
        }

        .result-game-info-selected {
            background-color: #FFCCCC;
        }

        #result-all-base {
            margin-top: 1em;
            display: grid;
            grid-template-columns: 1fr 1fr;
            border-top: 1px solid black;
            border-left: 1px solid black;
            box-sizing: border-box;
        }
        #result-all-base.hide {
            display: none;
        }

        .result-all-team-base {
            border-right: 1px solid black;
            border-bottom: 1px solid black;
            box-sizing: border-box;
        }
        .result-all-team-banner {
            display: grid;
            grid-template-columns: 2em 1fr 4em 4em 4em;
            line-height: 3em;
        }
        .result-all-team-name {
            font-weight: bold;
            padding-left: 1em;
        }
        .result-all-team-rank {
            text-align: right;
        }
        .result-all-team-kills, .result-all-team-placement, .result-all-team-points {
            text-align: center;
            line-height: 2em;
        }
        .result-all-team-points {
            font-weight: bold;
        }
        .result-all-team-kills-label, .result-all-team-placement-label, .result-all-team-points-label {
            font-size: 50%;
            line-height: 1;
        }
        .result-all-team-placement span {
            font-size: 50%;
        }

        .result-all-player-base {
            margin: 0 4em 0 8em;
            display: grid;
            grid-template-columns: 1fr 4em;
            padding-left: 1em;
            border-top: 1px solid black;
            border-left: 1px solid black;
            box-sizing: border-box;
        }

        #result-single {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            border-top: 1px solid black;
            border-left: 1px solid black;
            box-sizing: border-box;
            margin-top: 1em;
        }
        #result-single.hide {
            display: none;
        }

        .result-single-team-base {
            border-right: 1px solid black;
            border-bottom: 1px solid black;

        }
        .result-single-team-banner {
            display: grid;
            grid-template-columns: 1fr 2.2em 2.2em 2.4em;
        }
        .result-single-team-name {
            font-weight: bold;
            line-height: 2em;
            padding-left: 1em;
            overflow: clip;
        }
        .result-single-team-placement-label, .result-single-team-kills-label, .result-single-team-points-label {
            font-size: 50%;
            text-align: center;
        }
        .result-single-team-placement-value, .result-single-team-kills-value, .result-single-team-points-value {
            text-align: center;
        }
        .result-single-player-label-base > div {
            font-size: 50%;
            text-align: center;
            background-color: #CCC;
        }
        .result-single-player-label-base, .result-single-player-base {
            font-size: 80%;
            display: grid;
            grid-template-columns: 1fr 5em 2em 2em 3em;
        }
        .result-single-player-base {
            line-height: 2em;
        }
        .result-single-player-name {
            padding-left: 0.5em;
            overflow: clip;
        }
        .result-single-player-kills, .result-single-player-assists {
            text-align: center;
        }
        .result-single-player-character {
            text-align: center;
            overflow: clip;
            white-space: nowrap;
            font-size: 50%;
        }
        .result-single-player-damage {
            text-align: center;
        }

        /* Test */
        #test {
            line-height: 1.5em;
            display: grid;
            gap: 10px;
            grid-template-columns: 1fr 1fr 1fr 1fr;
        }
        #test > div {
            padding: 10px;
            border: 1px solid #000;
        }
    </style>
</head>

<body>
    
<div id="sidebar">
    <h3>WebAPI Connection</h3>
    <div>
        <button id="connectbtn">force reconnect</button>
        <p>status: <span id="connectstatus">connecting...</span></p>
    </div>
    <h3>Current Tournament</h3>
    <dl>
        <dt>Name:</dt>
        <dd id="current_tournament_name">noname</dd>
        <dt>ID:</dt>
        <dd id="current_tournament_id">none</dd>
    </dl>
    <h3>Current Observer</h3>
    <dl>
        <dt>ID:</dt>
        <dd id="current_observer_id">none</dd>
    </dl>
    <h3>MENU</h3>
    <ul id="sidebarmenu">
        <li>
            Tournament
            <ul>
                <li><a href="#tournament-set">set</a></li>
                <li><a href="#tournament-rename">rename</a></li>
            </ul>
        </li>
        <li>
            Observer
            <ul>
                <li><a href="#observer-set">set</a></li>
            </ul>
        </li>
        <li>Player
            <ul>
                <li><a href="#player-name">set name</a></li>
            </ul>
        </li>
        <li>Team
            <ul>
                <li><a href="#team-name">set name</a></li>
            </ul>
        </li>
        <li><a href="#realtime">Realtime View</a></li>
        <li><a href="#overlay">Overlay</a></li>
        <li><a href="#announce">Announce</a></li>
        <li>
            Result
            <ul id="ulresult">
                <li><a href="#result-all">all</a></li>
            </ul>
        </li>
        <li><a href="#test">Test</a>
    </ul>
</div>

<div id="main">
<div id="tournament-set" class="hide">
    <h3>Tournament: set name</h3>
    <p>create new tournament or select exists tournament.</p>
    <h4>create new tournament</h4>
    <p>
        <input type="text" id="tournament-set-text" placeholder="input tournament name" /><button id="tournament-set-button">create</button>
        <br>
        ** If there is already a tournament with the same name, the existing tournament will be selected.
    </p>
    <h4>select exists tournament</h4>
    <table>
        <thead>
            <tr><th>name</th><th>ID</th></tr>
        </thead>
        <tbody id="tournamentids"></tbody>
    </table>
</div>

<div id="tournament-rename" class="hide">
    <h3>Tournament: rename</h3>
    <p>rename current tournament.</p>
    <p>
        <input type="text" id="tournament-rename-text" placeholder="input tournament name" /><button id="tournament-rename-button">rename</button>
        <br>
    </p>
</div>

<div id="observer-set" class="hide">
    <h3>Observer: set</h3>
    <h4>gather observer hash</h4>
    <p>
        <button id="observer-set-getfromlobby">get from lobby</button>
    </p>
    <h4>select observer for overlay</h4>
    <table>
        <thead>
            <tr><th>ID</th><th>name</th></tr>
        </thead>
        <tbody id="observer-set-list"></tbody>
    </table>
</div>

<div id="player-name" class="hide">
    <h3>Player: set name</h3>
    <h4>gather player hash</h4>
    <p>
        <button id="player-name-getfromresults">get from results</button>
        <button id="player-name-getfromlivedata"><s>get from current game</s></button>
        <button id="player-name-getfromlobby">get from lobby</button>
    </p>
    <h4>set player name</h4>
    <table>
        <thead>
            <tr><th>ID</th><th>name</th><th>in-game name</th><th>set name</th></tr>
        </thead>
        <tbody id="player-name-list"></tbody>
    </table>
</div>

<div id="team-name" class="hide">
    <h3>Team: set name</h3>
    <div id="team-name-container">
        <div></div>
        <div>input</div>
        <div>set name result</div>
        <pre id="team-name-num"></pre>
        <textarea id="team-name-text"></textarea>
        <pre id="team-name-output"></pre>
    </div>
    <button id="team-name-button">set name</button>
</div>

<div id="realtime" class="hide">
    <h3>Realtime View</h3>
    <div id="realtime-gameinfo"></div>
    <div id="realtime-teams"></div>
</div>

<div id="overlay" class="hide">
    <h3>Overlay</h3>
    <h4>force hide overlay</h4>
    <p>
        <label><input type="checkbox" id="overlay-hide-leaderboard" /> Force hide LeaderBoard</label>
    </p>
    <p>
        <label><input type="checkbox" id="overlay-hide-teambanner" /> Force hide TeamBanner</label>
    </p>
    <p>
        <label><input type="checkbox" id="overlay-hide-playerbanner" /> Force hide PlayerBanner</label>
    </p>
    <p>
        <label><input type="checkbox" id="overlay-hide-teamkills" /> Force hide TeamKills</label>
    </p>
    <p>
        <label><input type="checkbox" id="overlay-hide-owneditems" /> Force hide OwnedItems</label>
    </p>
    <p>
        <label><input type="checkbox" id="overlay-hide-gameinfo" /> Force hide GameInfo</label>
    </p>
    <p>
        <label><input type="checkbox" id="overlay-hide-championbanner" /> Force hide ChampionBanner</label>
    </p>
    <p>
        <label><input type="checkbox" id="overlay-hide-squadeliminated" /> Force hide SquadEliminated</label>
    </p>
    <p>
        <label><input type="checkbox" id="overlay-hide-tdmscoreboard" /> Force hide TDMScoreBoard</label>
    </p>
    <h4>select by group</h4>
    <p>
        <label><input type="checkbox" id="overlay-hide-teamplayerinfo" /> Force hide Team/Player Overlay</label>
    </p>
    <h4>match result</h4>
    <label><input type="radio" id="overlay-show-all-results" name="overlay-result-radio" value="all" checked />ALL</label><br />
    <label><input type="radio" id="overlay-show-one-result" name="overlay-result-radio" value="one" />GAMEID: <input type="number" id="overlay-show-one-result-number" min="0" value="0" />(Game1 → 0)</label>
    <p><button id="overlay-show-matchresult">show match result</button></p>
    <p><button id="overlay-hide-matchresult">hide match result</button></p>
</div>

<div id="announce" class="hide">
    <h3>Announce</h3>
    <h4>send chat</h4>
    <p>
        <input type="text" id="announce-text" /><button id="announce-button">send</button>
    </p>
</div>

<div id="result" class="hide">
    <h3>Result</h3>
    <p><a href="#result-all">show all results</a></p>
    <div id="result-game-info"></div>
    <div id="result-all-base">
        <div id="result-all-left"></div>
        <div id="result-all-right"></div>
    </div>
    <div id="result-single" class="hide"></div>
</div>

<div id="test" class="hide">
    <div>
        <h3>Leaderboard</h3>
        <button id="test-show-leaderboard">Show</button>
    </div>
    <div>
        <h3>TeamBanner</h3>
        <div>
            TeamID: <input type="number" min="0" max="29" id="test-teambanner-teamid" placeholder="0-29" value="0" /><br />
            <button id="test-show-teambanner">Show</button>
        </div>
    </div>
    <div>
        <h3>PlayerBanner</h3>
        <div>
            Player Name: <input type="text" id="test-playerbanner-name" value="" /><br />
            <button id="test-show-playerbanner">Show</button>
        </div>
    </div>
    <div>
        <h3>TeamKills</h3>
        <div>
            Kills: <input type="number" min="0" id="test-teamkills-kills" placeholder="0-" value="0" /><br />
            <button id="test-show-teamkills">Show</button>
        </div>
    </div>
    <div>
        <h3>OwnedItems</h3>
        <div>
            BackPack:
            <select id="test-owneditems-backpack">
                <option value="0">none</option>
                <option value="1">White (level 1)</option>
                <option value="2">Blue (level 2)</option>
                <option value="3">Purple (level 3)</option>
                <option value="4">Gold (level 4)</option>
            </select>
            <br />
            KnockdownShield:
            <select id="test-owneditems-knockdownshield">
                <option value="0">none</option>
                <option value="1">White (level 1)</option>
                <option value="2">Blue (level 2)</option>
                <option value="3">Purple (level 3)</option>
                <option value="4">Gold (level 4)</option>
            </select>
            <br />
            Syringe: <input type="number" min="0" max=30 id="test-owneditems-syringe" placeholder="0-30" value="0" /><br />
            MedKit: <input type="number" min="0" max=30 id="test-owneditems-medkit" placeholder="0-30" value="0" /><br />
            ShieldCell: <input type="number" min="0" max=30 id="test-owneditems-shieldcell" placeholder="0-30" value="0" /><br />
            ShieldBattery: <input type="number" min="0" max=30 id="test-owneditems-shieldbattery" placeholder="0-30" value="0" /><br />
            PhoenixKit: <input type="number" min="0" max=30 id="test-owneditems-phoenixkit" placeholder="0-30" value="0" /><br />
            UltimateAccelerant: <input type="number" min="0" max=30 id="test-owneditems-ultimateaccelerant" placeholder="0-30" value="0" /><br />
            ThermitGrenade: <input type="number" min="0" max=30 id="test-owneditems-thermitgrenade" placeholder="0-30" value="0" /><br />
            FragGrenade: <input type="number" min="0" max=30 id="test-owneditems-"fraggrenade"" placeholder="0-30" value="0" /><br />
            ArcStar: <input type="number" min="0" max=30 id="test-owneditems-arcstar" placeholder="0-30" value="0" /><br />
            <button id="test-show-owneditems">Show</button>
        </div>
    </div>
    <div>
        <h3>GameInfo</h3>
        <div>
            GameID: <input type="number" min="0" id="test-gameinfo-gameid" placeholder="0-" value="0" /><br />
            <button id="test-show-gameinfo">Show</button>
        </div>
    </div>
    <div>
        <h3>SquadEliminated</h3>
        <div>
            TeamID: <input type="number" min="0" max="29" id="test-squadeliminated-teamid" placeholder="0-29" value="0" /><br />
            <button id="test-show-squadeliminated">Show</button>
        </div>
    </div>
    <div>
        <h3>ChampionBanner</h3>
        <div>
            TeamID: <input type="number" min="0" max="29" id="test-championbanner-teamid" placeholder="0-29" value="0" /><br />
            <button id="test-show-championbanner">Show</button>
        </div>
    </div>
    <div>
        <h3>Hide</h3>
        <button id="test-hideall">Hide All</button>
    </div>
</div>
</div>



<script type="module">
import {
    WebAPIConfig
} from "./webapi-config.js";

window.onload = (event) => {
    const config = new WebAPIConfig("ws://127.0.0.1:20081/");
}
</script>
</body>
</html>